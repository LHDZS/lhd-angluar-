<div class="editor-toolbar">
    <div class="toolbar-panel">
        <div class="left-panel">
            <ng-content select="[position=left]"></ng-content>
        </div>
        <div class="right-panel">
            <ng-content select="[position=right]"></ng-content>
            <div *ngIf="setDisplay && makingPermission.$$making" class="icon-panel" (click)="_onOpen()">
                <img src="/assets/icons/setting-icon.png" alt="" >
            </div>
            
        </div>
    </div>
    <dx-popup
        #columnPopup
        [width]="700"
        [height]="600"
        [showTitle]="true"
        title="表单设置"
        [dragEnabled]="true"
        [closeOnOutsideClick]="false"
        [(visible)]="columnSettingDisabled"
        [shading]="true"
        [resizeEnabled]="true"
        (onShowing)="_showing()"
        (onHidden)="_hidden()"
    >
        <dx-tab-panel
            #tabPanel
            height="calc(100% - 60px)"
            [selectedIndex]="selectedIndex"
            [loop]="false"
            [animationEnabled]="true"
            [swipeEnabled]="false"
            (onTitleClick)="TitleClick($event)"
        >
            <!-- <dxi-item title="表头设置(*)">
                <div
                    style="
                        height: 100%;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        flex-direction: column;
                    "
                >
                    <div style="height: 100%; width: 100%">
                        <dx-data-grid
                            #headDataGrid
                            width="100%"
                            height="100%"
                            keyExpr="dataField"
                            [(dataSource)]="conditionItems"
                            (onEditorPreparing)="onEditorPreparing($event)"
                        >
                            <dxo-row-dragging [allowReordering]="true" [onReorder]="onReorder" [showDragIcons]="true">
                            </dxo-row-dragging>
                            <dxo-scrolling mode="virtual"></dxo-scrolling>
                            <dxo-editing mode="cell" [allowUpdating]="true"> </dxo-editing>
                            <dxo-sorting mode="none"></dxo-sorting>
                            <dxi-column caption="字段名称" dataField="showLabel" [allowEditing]="false"></dxi-column>
                            <dxi-column caption="显示名称" dataField="label"></dxi-column>
                            <dxi-column
                                caption="必填项"
                                dataField="required"
                                dataType="boolean"
                                [width]="80"
                                [showEditorAlways]="true"
                            ></dxi-column>
                            <dxi-column
                                caption="显示"
                                dataField="headVisible"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column>
                        </dx-data-grid>
                    </div>
                </div>
            </dxi-item> -->
            <dxi-item *ngIf="zqModel.title1" [title]="zqModel.title1 + '设置'">
                <div class="tab_data_grid">
                    <div style="height: 100%; width: 100%">
                        <dx-data-grid
                            #columnDataGrid
                            width="100%"
                            height="100%"
                            keyExpr="dataField"
                            [(dataSource)]="columnSettingArr"
                            (onEditorPreparing)="onColumnEditorPreparing($event,'columnSettingArr')"
                        >
                            <dxo-row-dragging [allowReordering]="true" [onReorder]="onColumnReorder" [showDragIcons]="true">
                            </dxo-row-dragging>
                            <dxo-scrolling mode="virtual"></dxo-scrolling>
                            <dxo-editing mode="cell" [allowUpdating]="true"> </dxo-editing>
                            <dxo-sorting mode="none"></dxo-sorting>
                            <dxi-column caption="字段名称" dataField="showCaption" [allowEditing]="false"></dxi-column>
                            <dxi-column caption="显示名称" dataField="caption"></dxi-column>
                            <!-- <dxi-column
                                caption="必填项"
                                dataField="HeaderRequiredIcon"
                                dataType="boolean"
                                [width]="80"
                                [showEditorAlways]="true"
                                [allowEditing]="allowEditing"
                            ></dxi-column> -->
                            <!-- [allowEditing]="false" -->
                            <dxi-column
                                caption="显示"
                                dataField="visible"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column>
                            <!-- <dxi-column
                                caption="冻结"
                                dataField="requiredDisable"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column> -->
                        </dx-data-grid>
                    </div>
                </div>
            </dxi-item>
            <dxi-item *ngIf="zqModel.title2" [title]="zqModel.title2 + '设置'">
                <div class="tab_data_grid">
                    <div style="height: 100%; width: 100%">
                        <dx-data-grid
                            #columnDataGrid2
                            width="100%"
                            height="100%"
                            keyExpr="dataField"
                            [(dataSource)]="columnSettingArr2"
                            (onEditorPreparing)="onColumnEditorPreparing($event,'columnSettingArr2')"
                        >
                            <dxo-row-dragging [allowReordering]="true" [onReorder]="onColumnReorder2" [showDragIcons]="true">
                            </dxo-row-dragging>
                            <dxo-scrolling mode="virtual"></dxo-scrolling>
                            <dxo-editing mode="cell" [allowUpdating]="true"> </dxo-editing>
                            <dxo-sorting mode="none"></dxo-sorting>
                            <dxi-column caption="字段名称" dataField="showCaption" [allowEditing]="false"></dxi-column>
                            <dxi-column caption="显示名称" dataField="caption"></dxi-column>
                            <!-- <dxi-column
                                caption="必填项"
                                dataField="HeaderRequiredIcon"
                                dataType="boolean"
                                [width]="80"
                                [showEditorAlways]="true"
                                [allowEditing]="allowEditing"
                            ></dxi-column> -->
                            <dxi-column
                                caption="显示"
                                dataField="visible"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column>
                            <!-- <dxi-column
                                caption="冻结"
                                dataField="requiredDisable"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column> -->
                        </dx-data-grid>
                    </div>
                </div>
            </dxi-item>
            <dxi-item *ngIf="zqModel.title3" [title]="zqModel.title3 + '设置'">
                <div class="tab_data_grid">
                    <div style="height: 100%; width: 100%">
                        <dx-data-grid
                            #columnDataGrid3
                            width="100%"
                            height="100%"
                            keyExpr="dataField"
                            [(dataSource)]="columnSettingArr3"
                            (onEditorPreparing)="onColumnEditorPreparing($event,'columnSettingArr3')"
                        >
                            <dxo-row-dragging [allowReordering]="true" [onReorder]="onColumnReorder3" [showDragIcons]="true">
                            </dxo-row-dragging>
                            <dxo-scrolling mode="virtual"></dxo-scrolling>
                            <dxo-editing mode="cell" [allowUpdating]="true"> </dxo-editing>
                            <dxo-sorting mode="none"></dxo-sorting>
                            <dxi-column caption="字段名称" dataField="showCaption" [allowEditing]="false"></dxi-column>
                            <dxi-column caption="显示名称" dataField="caption"></dxi-column>
                            <!-- <dxi-column
                                caption="必填项"
                                dataField="HeaderRequiredIcon"
                                dataType="boolean"
                                [width]="80"
                                [showEditorAlways]="true"
                                [allowEditing]="allowEditing"
                            ></dxi-column> -->
                            <dxi-column
                                caption="显示"
                                dataField="visible"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column>
                        </dx-data-grid>
                    </div>
                </div>
            </dxi-item>
            <dxi-item *ngIf="zqModel.title4" [title]="zqModel.title4 + '设置'">
                <div class="tab_data_grid">
                    <div style="height: 100%; width: 100%">
                        <dx-data-grid
                            width="100%"
                            height="100%"
                            keyExpr="dataField"
                            [(dataSource)]="columnSettingArr4"
                            (onEditorPreparing)="onColumnEditorPreparing($event,'columnSettingArr4')"
                        >
                            <dxo-row-dragging [allowReordering]="true" [onReorder]="onColumnReorder4" [showDragIcons]="true">
                            </dxo-row-dragging>
                            <dxo-scrolling mode="virtual"></dxo-scrolling>
                            <dxo-editing mode="cell" [allowUpdating]="true"> </dxo-editing>
                            <dxo-sorting mode="none"></dxo-sorting>
                            <dxi-column caption="字段名称" dataField="showCaption" [allowEditing]="false"></dxi-column>
                            <dxi-column caption="显示名称" dataField="caption"></dxi-column>
                            <!-- <dxi-column
                                caption="必填项"
                                dataField="HeaderRequiredIcon"
                                dataType="boolean"
                                [width]="80"
                                [showEditorAlways]="true"
                                [allowEditing]="allowEditing"
                            ></dxi-column> -->
                            <dxi-column
                                caption="显示"
                                dataField="visible"
                                [width]="80"
                                dataType="boolean"
                                [showEditorAlways]="true"
                            ></dxi-column>
                        </dx-data-grid>
                    </div>
                </div>
            </dxi-item>
        </dx-tab-panel>
        <div style="display: flex; align-items: center; justify-content: center; margin-top: 20px">
            <dx-button text="取消" type="default" width="100px" style="margin-right: 20px" (onClick)="_onCancel()">
            </dx-button>
            <dx-button text="保存" type="default" width="100px" [disabled]="!saveStatus" (onClick)="_onSave()"></dx-button>
        </div>
    </dx-popup>
</div>
